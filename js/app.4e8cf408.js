(function(e){function t(t){for(var r,a,s=t[0],c=t[1],u=t[2],l=0,d=[];l<s.length;l++)a=s[l],o[a]&&d.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);f&&f(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var s=n[a];0!==o[s]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},a={app:0},o={app:0},i=[];function s(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-086c0908":"a65c21a8","chunk-2d0bd977":"c8b525cb","chunk-2d0c22cb":"5fc87cae"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={"chunk-086c0908":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-086c0908":"813790aa","chunk-2d0bd977":"31d6cfe0","chunk-2d0c22cb":"31d6cfe0"}[e]+".css",o=c.p+r,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var u=i[s],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===o))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){u=d[s],l=u.getAttribute("data-href");if(l===r||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var r=t&&t.target&&t.target.src||o,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete a[e],f.parentNode.removeChild(f),n(i)},f.href=o;var m=document.getElementsByTagName("head")[0];m.appendChild(f)}).then(function(){a[e]=0}));var r=o[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=o[e]=[t,n]});t.push(r[2]=i);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=s(e),u=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=o[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");i.type=r,i.request=a,n[1](i)}o[e]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/<vue-cinema>/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"365c":function(e,t,n){"use strict";var r=n("bc3a"),a=n.n(r),o="b769a5a0bcf0ed38b9f8ae216013c02e",i=a.a.create({baseURL:"https://api.themoviedb.org/3/"});i.interceptors.request.use(function(e){return e.params||(e.params={}),e.params.api_key=o,e}),t["a"]=i},5518:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=n("bb71");n("da64");r["a"].use(a["a"],{iconfont:"md"});var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("Navbar"),n("v-content",[n("router-view")],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("nav",[n("v-toolbar",{attrs:{flat:"",app:"",dark:"",color:"indigo darken-1"}},[n("v-toolbar-title",{staticClass:"text-uppercase"},[n("router-link",{staticClass:"logo-title",attrs:{to:{name:"home"}}},[e._v("\n        Vue-Cinema\n      ")])],1),n("v-spacer"),n("v-toolbar-items",[n("v-btn",{staticClass:"mr-3",attrs:{flat:"",to:{name:"favorites"}}},[e._v("Favorites")]),n("v-text-field",{attrs:{"hide-details":"",clearable:"",placeholder:"Search a film","append-icon":"search","single-line":"",color:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchMovie()}},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)],1)],1)},c=[],u={data:function(){return{searchQuery:""}},methods:{searchMovie:function(){this.$router.push({name:"search",params:{query:this.searchQuery}})}}},l=u,d=(n("5dfc"),n("2877")),f=n("6544"),m=n.n(f),v=n("8336"),h=n("9910"),p=n("2677"),g=n("71d9"),b=n("2a7f"),y=Object(d["a"])(l,s,c,!1,null,null,null),_=y.exports;m()(y,{VBtn:v["a"],VSpacer:h["a"],VTextField:p["a"],VToolbar:g["a"],VToolbarItems:b["a"],VToolbarTitle:b["b"]});n("365c");var k={name:"App",components:{Navbar:_},data:function(){return{}}},S=k,w=n("7496"),C=n("549c"),x=Object(d["a"])(S,o,i,!1,null,null,null),O=x.exports;m()(x,{VApp:w["a"],VContent:C["a"]});var P=n("8c4f"),M=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"home",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"10"}},[n("v-container",{staticClass:"my-4"},[n("h1",[e._v("Popular movies")]),n("v-layout",{staticClass:"mt-3",attrs:{row:"",wrap:""}},e._l(e.movies,function(e){return n("movie-block",{key:e.id,attrs:{movie:e}})}),1)],1),"loading"===e.responseStatus?[n("h1",[e._v("Loading")])]:e._e()],2)},T=[],j=n("cee3"),F=n("f336"),N={data:function(){return{activePage:1,totalPages:0,movies:[],responseStatus:"clean",busy:!1}},components:{MovieBlock:F["a"]},methods:{loadMovies:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.activePage;this.responseStatus="loading",this.busy=!0,j["a"].getPopular(t).then(function(t){var n=t.results,r=t.page,a=t.total_pages;e.movies=e.movies.concat(n),e.activePage=r,e.totalPages=a,e.responseStatus="success",e.busy=!1}).catch(function(t){console.log(t),e.responseStatus="error",e.busy=!0})},changePage:function(){this.activePage+=1,this.loadMovies(this.activePage)},showDetails:function(e){this.$router.push({name:"movie-detail",params:{movieId:e}})},loadMore:function(){this.changePage()}},mounted:function(){this.loadMovies()}},E=N,G=n("a523"),I=n("a722"),V=Object(d["a"])(E,M,T,!1,null,null,null),L=V.exports;m()(V,{VContainer:G["a"],VLayout:I["a"]}),r["a"].use(P["a"]);var B=new P["a"]({mode:"history",base:"/<vue-cinema>/",routes:[{path:"/",name:"home",component:L},{path:"/detail/:movieId",name:"movie-detail",component:function(){return n.e("chunk-086c0908").then(n.bind(null,"043a"))}},{path:"/favorites",name:"favorites",component:function(){return n.e("chunk-2d0c22cb").then(n.bind(null,"48d5"))}},{path:"/search/:query",name:"search",props:!0,component:function(){return n.e("chunk-2d0bd977").then(n.bind(null,"2d3b"))}}]}),$=n("c0d6"),A=(n("6672"),n("487a")),q=n.n(A);r["a"].use(q.a),r["a"].config.productionTip=!1,new r["a"]({router:B,store:$["a"],render:function(e){return e(O)}}).$mount("#app")},"5dfc":function(e,t,n){"use strict";var r=n("8d56"),a=n.n(r);a.a},"63ec":function(e,t,n){"use strict";var r=n("5518"),a=n.n(r);a.a},6672:function(e,t,n){},"8d56":function(e,t,n){},c0d6:function(e,t,n){"use strict";var r=n("2b0e"),a=n("2f62");r["a"].use(a["a"]);var o=new a["a"].Store({state:{genres:[]},mutations:{setGenres:function(e,t){e.genres=t}}});t["a"]=o},cee3:function(e,t,n){"use strict";n("20d6"),n("7514");var r=n("365c"),a=n("c0d6"),o="favorites",i=localStorage.getItem(o)?JSON.parse(localStorage.getItem(o)):[],s={genres:[],genreStatus:"clean",getPopular:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return r["a"].get("movie/popular?page=".concat(e)).then(function(e){return e.data.results=e.data.results.map(function(e){return c(e)}),e.data}).catch(function(e){console.log(e)})},getMovieById:function(e){return r["a"].get("movie/".concat(e)).then(function(e){return c(e.data)}).catch(function(e){console.log(e)})},getGenresOnce:function(){"clean"===this.genreStatus&&this.getGenresList()},getGenresList:function(){var e=this;return this.genreStatus="loading",r["a"].get("/genre/movie/list").then(function(t){return e.genres=t.data.genres,a["a"].commit("setGenres",t.data.genres),e.genreStatus="success",t.data}).catch(function(t){throw console.log(t),e.genreStatus="error",t})},getGenreById:function(e){return this.genres?this.genres.find(function(t){return t.id===e}):null},addToFavorite:function(e,t){var n=i.findIndex(function(t){return t==e});return-1===n||t?-1===n&&t&&i.push(e):i.splice(n,1),localStorage.setItem(o,JSON.stringify(i)),t},searchMovies:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return r["a"].get("/search/movie",{params:{query:e,page:t}}).then(function(e){return e.data.results=e.data.results.map(function(e){return c(e)}),e.data}).catch(function(e){throw console.log(e),e})},getRecomandations:function(e){return r["a"].get("movie/".concat(e,"/recommendations")).then(function(e){return e.data.results=e.data.results.map(function(e){return c(e)}),e.data}).catch(function(e){console.log(e)})},getFavorites:function(){return i}};function c(e){return e.isFavorite=!!i.find(function(t){return t===e.id}),e}t["a"]=s},f336:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-flex",{staticClass:"mb-5"},[e.m?[n("router-link",{staticClass:"undecorate",attrs:{to:{name:"movie-detail",params:{movieId:e.m.id}}}},[n("div",{staticClass:"movie-card"},[n("img",{attrs:{src:"http://image.tmdb.org/t/p/w200/"+e.m.poster_path,alt:e.m.title}}),n("div",{staticClass:"subheading"},[e._v(e._s(e.m.title))]),n("div",{staticClass:"grey--text genre-list"},[e.m.genre_ids?e._l(e.m.genre_ids,function(e,t){return n("GenreComponent",{key:t,attrs:{id:e}})}):e._e(),e.m.genres?e._l(e.m.genres,function(e,t){return n("GenreComponent",{key:t,attrs:{id:e.id}})}):e._e()],2)])]),e.m.isFavorite?n("v-btn",{staticClass:"white--text mt-2",attrs:{color:"indigo",small:"",flat:"",icon:""},on:{click:function(t){return e.addToFavorite(e.m.id,!e.m.isFavorite)}}},[n("v-icon",[e._v("favorite")])],1):n("v-btn",{staticClass:"white--text mt-2",attrs:{color:"indigo",small:"",flat:"",icon:""},on:{click:function(t){return e.addToFavorite(e.m.id,!e.m.isFavorite)}}},[n("v-icon",[e._v("favorite_border")])],1)]:e._e()],2)},a=[],o=(n("7f7f"),n("c5f6"),n("cee3")),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"genre mr-2"},[e._v(e._s(e.getGenreName))])},s=[],c=(n("7514"),{props:{id:[String,Number]},computed:{genre:function(){var e=this;return this.$store.state.genres.find(function(t){return t.id===e.id})},getGenreName:function(){return this.genre?this.genre.name:null}}}),u=c,l=n("2877"),d=Object(l["a"])(u,i,s,!1,null,null,null),f=d.exports,m={props:{id:[String,Number],movie:Object,autoLoad:Boolean},data:function(){return{m:this.autoLoad?null:this.movie}},components:{GenreComponent:f},methods:{loadMovie:function(){var e=this;o["a"].getMovieById(this.id).then(function(t){e.m=t,console.log(e.m.genres)})},getGenreName:function(e){var t=o["a"].getGenreById(e);return t?t.name:null},addToFavorite:function(e,t){o["a"].addToFavorite(e,t),this.m.isFavorite=t}},mounted:function(){this.autoLoad&&this.loadMovie(),o["a"].getGenresOnce()}},v=m,h=(n("63ec"),n("6544")),p=n.n(h),g=n("8336"),b=n("0e8f"),y=n("132d"),_=Object(l["a"])(v,r,a,!1,null,null,null);t["a"]=_.exports;p()(_,{VBtn:g["a"],VFlex:b["a"],VIcon:y["a"]})}});
//# sourceMappingURL=app.4e8cf408.js.map